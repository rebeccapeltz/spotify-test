(function(e){function t(t){for(var o,s,i=t[0],u=t[1],c=t[2],p=0,h=[];p<i.length;p++)s=i[p],r[s]&&h.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("64a9"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("a026"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],s={name:"app"},i=s,u=(n("034f"),n("2877")),c=Object(u["a"])(i,r,a,!1,null,null,null),l=c.exports,p=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"keyword-search"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.mustLogin&&!e.loggedIn,expression:"mustLogin && !loggedIn"}],attrs:{id:"login"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loggedIn,expression:"!loggedIn"}]},[n("p",[e._v("You must log in to Spotify to use this app.")]),n("p",[n("button",{attrs:{id:"login-button"},on:{click:e.login}},[e._v("Log In")])])]),n("div",{attrs:{id:"user-profile-template"}}),n("div",{attrs:{id:"user-profile"}}),n("div",{attrs:{id:"oauth-template"}}),n("div",{attrs:{id:"oauth"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loggedIn,expression:"loggedIn"}],attrs:{id:"loggedIn"}},[n("h3",[e._v("Welcome "+e._s(e.me&&e.me.display_name))]),n("p",[e._v("Music for your Mood")]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.query&&e.query.length>0,expression:"query && query.length > 0"}]},[e._v("This is a playlist based on "),n("strong",[e._v(e._s(e.query))])]),n("form",{on:{submit:function(t){return t.preventDefault(),e.getPlaylist(t)}}},[n("p",[e._v("I'm feeling like..."),n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"something"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),n("button",[e._v("Go")])])]),n("table",{staticClass:"music"},e._l(e.results,function(t,o){return n("tr",{key:o},[n("td",[e._v(e._s(t.name))]),n("td",[n("button",{attrs:{id:"music-fetch-button"},on:{click:e.fetchMusic}},[e._v("Fetch")])])])}),0)])])},d=[],f=n("bc3a"),v=n.n(f);function m(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);while(e=n.exec(o))t[e[1]]=decodeURIComponent(e[2]);return t}function g(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function y(e){var t="",n="";"localhost:8080"==location.host?(t="d691b67437944ac1bb56a568badcc0e1",n="http://localhost:8080/authorize"):(t="d691b67437944ac1bb56a568badcc0e1",n="https://spotify-test-84f79.firebaseapp.com/authorize");var o=g(16);localStorage.setItem(e,o);var r="user-read-private user-read-email",a="https://accounts.spotify.com/authorize";a+="?response_type=token",a+="&client_id="+encodeURIComponent(t),a+="&scope="+encodeURIComponent(r),a+="&redirect_uri="+encodeURIComponent(n),a+="&state="+encodeURIComponent(o),window.location=a}var _={name:"KeywordSearch",data:function(){var e=!!this.$route.hash;return{results:null,me:null,errors:[],query:"",mustLogin:!0,loggedIn:e,access_token:this.$route.hash.substring(1)}},mounted:function(){var e=this;if(console.log("access_token",this.access_token),this.access_token){var t={headers:{Authorization:"Bearer ".concat(this.access_token)}},n="https://api.spotify.com/v1/me",o=this;v.a.get(n,t).then(function(e){o.me=e.data}).catch(function(t){e.errors.push(t)})}},methods:{login:function(){var e="spotify_auth_state",t=m(),n=localStorage.getItem(e);!this.access_token||null!=t.state&&t.state===n?(localStorage.removeItem(e),this.access_token?v.a.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+access_token},success:function(e){userProfilePlaceholder.innerHTML=userProfileTemplate(e),this.mustLogin=!1,this.loggedIn=!0}}):(this.mustLogin=!0,this.loggedIn=!1)):alert("There was an error during the authentication"),y(e)},fetchMusic:function(){return{}},getPlaylist:function(){var e=this,t={headers:{Authorization:"Bearer ".concat(this.access_token)}},n="https://api.spotify.com/v1/search?type=playlist&q=".concat(this.query),o=this;v.a.get(n,t).then(function(e){o.results=e.data.playlists.items}).catch(function(t){e.errors.push(t)})}}},b=_,w=(n("6426"),Object(u["a"])(b,h,d,!1,null,"0b51fceb",null)),k=w.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Congrats, you have been authorized.")]),n("p",[e._v("Logged in as "+e._s(e.display_name))]),n("router-link",{attrs:{to:"/"}},[e._v("Return Home")])],1)},x=[],q=(n("28a5"),{name:"Authorize",created:function(){console.log("Authorize created")},data:function(){var e=location.hash.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=t[1],e},{}),t=e["#access_token"];return this.$router.push({path:"/#".concat(t)}),{display_name:"test authorize"}},methods:{}}),z=q,O=Object(u["a"])(z,I,x,!1,null,null,null),P=O.exports;o["a"].use(p["a"]);var j=new p["a"]({mode:"history",routes:[{path:"/",name:"KeywordSearch",component:k},{path:"/authorize",name:"Authorize",component:P}]}),M=n("d9ca"),S=n.n(M),A=n("a255"),C=n.n(A);o["a"].config.productionTip=!1,new o["a"]({el:"#app",router:j,template:"<App/>",components:{App:l}}),o["a"].use(C.a,new S.a)},6426:function(e,t,n){"use strict";var o=n("b721"),r=n.n(o);r.a},"64a9":function(e,t,n){},b721:function(e,t,n){}});
//# sourceMappingURL=app.6304e42c.js.map