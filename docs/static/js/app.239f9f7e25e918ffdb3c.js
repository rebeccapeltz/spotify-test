webpackJsonp([1],{"40lF":function(e,t){},"9rLS":function(e,t){},NHnr:function(e,t,o){"use strict";function n(e){o("9rLS")}function a(){for(var e,t={},o=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=o.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}function s(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}function r(e){var t="",o="";"localhost:8080"==location.host?(t="d691b67437944ac1bb56a568badcc0e1",o="http://localhost:8080/authorize"):(t="d691b67437944ac1bb56a568badcc0e1",o="https://spotify-test-84f79.firebaseapp.com/authorize");var n=s(16);localStorage.setItem(e,n);var a="https://accounts.spotify.com/authorize";a+="?response_type=token",a+="&client_id="+encodeURIComponent(t),a+="&scope="+encodeURIComponent("user-read-private user-read-email"),a+="&redirect_uri="+encodeURIComponent(o),a+="&state="+encodeURIComponent(n),window.location=a}function i(e){o("40lF")}Object.defineProperty(t,"__esModule",{value:!0});var c=o("7+uW"),u={name:"app"},l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},h=[],d={render:l,staticRenderFns:h},p=d,v=o("VU/8"),m=n,g=v(u,p,!1,m,null,null),f=g.exports,_=o("/ocq"),y=o("mtWM"),w=o.n(y),b={name:"KeywordSearch",data:function(){return{results:null,me:null,errors:[],query:"",mustLogin:!0,loggedIn:!!this.$route.hash,access_token:this.$route.hash.substring(1)}},mounted:function(){var e=this;if(console.log("access_token",this.access_token),this.access_token){var t={headers:{Authorization:"Bearer ".concat(this.access_token)}},o=this;w.a.get("https://api.spotify.com/v1/me",t).then(function(e){o.me=e.data}).catch(function(t){e.errors.push(t)})}},methods:{login:function(){var e="spotify_auth_state",t=a(),o=localStorage.getItem(e);!this.access_token||null!=t.state&&t.state===o?(localStorage.removeItem(e),this.access_token?w.a.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+access_token},success:function(e){userProfilePlaceholder.innerHTML=userProfileTemplate(e),this.mustLogin=!1,this.loggedIn=!0}}):(this.mustLogin=!0,this.loggedIn=!1)):alert("There was an error during the authentication"),r(e)},fetchMusic:function(){return{}},getPlaylist:function(){var e=this,t={headers:{Authorization:"Bearer ".concat(this.access_token)}},o="https://api.spotify.com/v1/search?type=playlist&q="+this.query,n=this;w.a.get(o,t).then(function(e){n.results=e.data.playlists.items}).catch(function(t){e.errors.push(t)})}}},I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"keyword-search"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.mustLogin&&!e.loggedIn,expression:"mustLogin && !loggedIn"}],attrs:{id:"login"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.loggedIn,expression:"!loggedIn"}]},[o("p",[e._v("You must log in to Spotify to use this app.")]),e._v(" "),o("p",[o("button",{attrs:{id:"login-button"},on:{click:e.login}},[e._v("Log In")])])]),e._v(" "),o("div",{attrs:{id:"user-profile-template"}}),e._v(" "),o("div",{attrs:{id:"user-profile"}}),e._v(" "),o("div",{attrs:{id:"oauth-template"}}),e._v(" "),o("div",{attrs:{id:"oauth"}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.loggedIn,expression:"loggedIn"}],attrs:{id:"loggedIn"}},[o("h3",[e._v("Welcome "+e._s(e.me&&e.me.display_name))]),e._v(" "),o("p",[e._v("Music for your Mood")]),e._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:e.query&&e.query.length>0,expression:"query && query.length > 0"}]},[e._v("This is a playlist based on "),o("strong",[e._v(e._s(e.query))])]),e._v(" "),o("form",{on:{submit:function(t){t.preventDefault(),e.getPlaylist(t)}}},[o("p",[e._v("I'm feeling like..."),o("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"something"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),o("button",[e._v("Go")])])]),e._v(" "),o("table",{staticClass:"music"},e._l(e.results,function(t,n){return o("tr",{key:n},[o("td",[e._v(e._s(t.name))]),o("td",[o("button",{attrs:{id:"music-fetch-button"},on:{click:e.fetchMusic}},[e._v("Fetch")])])])}))])])},k=[],q={render:I,staticRenderFns:k},z=q,x=o("VU/8"),A=i,L=x(b,z,!1,A,"data-v-a5dba230",null),C=L.exports,M={name:"Authorize",created:function(){console.log("Authorize created")},data:function(){var e=location.hash.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=t[1],e},{}),t=e["#access_token"];return this.$router.push({path:"/#"+t}),{display_name:"test authorize"}},methods:{}},R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("Congrats, you have been authorized.")]),e._v(" "),o("p",[e._v("Logged in as "+e._s(e.display_name))]),e._v(" "),o("router-link",{attrs:{to:"/"}},[e._v("Return Home")])],1)},S=[],U={render:R,staticRenderFns:S},N=U,P=o("VU/8"),F=P(M,N,!1,null,null,null),T=F.exports;c.a.use(_.a);var $=new _.a({mode:"history",routes:[{path:"/",name:"KeywordSearch",component:C},{path:"/authorize",name:"Authorize",component:T}]}),H=o("9CA4"),V=o.n(H),B=o("5Vcx"),E=o.n(B);c.a.config.productionTip=!1,new c.a({el:"#app",router:$,template:"<App/>",components:{App:f}}),c.a.use(E.a,new V.a)}},["NHnr"]);
//# sourceMappingURL=app.239f9f7e25e918ffdb3c.js.map